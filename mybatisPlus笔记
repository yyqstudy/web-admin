
å¤„ç†DataTablesä¸‹é¢çš„AdvancedTableé¡µé¢--dynamic_table
========================æ•°æ®è®¿é—®  æ•´åˆmybatis-plus ========================
è‡ªåŠ¨é…ç½®
MybatisPlusAutoConfiguration é…ç½®ç±»ï¼ŒMybatisPlusProperties é…ç½®é¡¹ç»‘å®šã€‚mybatis-plusï¼šxxx å°±æ˜¯å¯¹mybatis-plusçš„å®šåˆ¶
SqlSessionFactory è‡ªåŠ¨é…ç½®å¥½ã€‚åº•å±‚æ˜¯å®¹å™¨ä¸­é»˜è®¤çš„æ•°æ®æº--druidæ•°æ®æº
mapperLocations è‡ªåŠ¨é…ç½®å¥½çš„ã€‚æœ‰é»˜è®¤å€¼ã€‚classpath*:/mapper/**/*.xmlï¼›ä»»æ„åŒ…çš„ç±»è·¯å¾„ä¸‹çš„æ‰€æœ‰mapperæ–‡ä»¶å¤¹ä¸‹ä»»æ„è·¯å¾„ä¸‹çš„æ‰€æœ‰xmléƒ½æ˜¯sqlæ˜ å°„æ–‡ä»¶ã€‚  å»ºè®®ä»¥åsqlæ˜ å°„æ–‡ä»¶ï¼Œæ”¾åœ¨ mapperä¸‹
å®¹å™¨ä¸­ä¹Ÿè‡ªåŠ¨é…ç½®å¥½äº† SqlSessionTemplate
@Mapper æ ‡æ³¨çš„æ¥å£ä¹Ÿä¼šè¢«è‡ªåŠ¨æ‰«æï¼›å»ºè®®ç›´æ¥ @MapperScan("com.example.admin.mapper") æ‰¹é‡æ‰«æå°±è¡Œ


  å…ˆåˆ›å»ºæ•°æ®åº“è¡¨user
          ||  ||
          ||  ||
           \\ //
  dynamic_table.htmlæ˜¯TableControllerå¤„ç†è·³è½¬çš„
  åœ¨TableController
  ç°åœ¨è¦åšçš„äº‹æƒ…ï¼šä»æ•°æ®åº“ä¸­æŸ¥å‡ºuserè¡¨ä¸­ç”¨æˆ·è¿›è¡Œå±•ç¤º
          ||  ||
          ||  ||
           \\ //
  åœ¨dynamic_table.html
  åˆ é™¤ä¸‹é¢çš„è¡¨æ ¼ï¼Œä¿ç•™é¡µé¢åªæœ‰ä¸€ä¸ªè¡¨æ ¼
          ||  ||
          ||  ||
           \\ //
    æ•´åˆmybatis-plus,åœ¨pom.xmlå¼•å…¥ä¾èµ–
    æŠŠmybatiså’Œjdbcçš„ä¾èµ–æ³¨é‡Šæ‰
          ||  ||
          ||  ||
           \\ //
   åœ¨ application.yml é…ç½®ï¼ˆä¹‹å‰åœ¨mybatisç»ƒä¹ å·²ç»é…ç½®å¥½äº†ï¼‰
          ||  ||
          ||  ||
           \\ //
   åœ¨ Spring Boot å¯åŠ¨ç±»ä¸­æ·»åŠ  @MapperScan æ³¨è§£ï¼Œæ‰«æ Mapper æ–‡ä»¶å¤¹ï¼šï¼ˆåœ¨servletä¸‹é¢çš„WebAdminApplicationï¼‰
          ||  ||
          ||  ||
           \\ //
         å‡†å¤‡ä¸€ä¸ªJavabean
     ç¼–å†™å®ä½“ç±» User.javaï¼ˆUserç±»ï¼Œåœ¨beanä¸‹é¢æ–°å»ºä¸€ä¸ªUser.javaï¼‰
          ||  ||
          ||  ||
           \\ //
          å‡†å¤‡ä¸€ä¸ªmapper
      ç¼–å†™Mapperç±» æ¥å£æ–‡ä»¶ UserMapper.java
      åªéœ€è¦æˆ‘ä»¬çš„Mapperç»§æ‰¿ BaseMapper å°±å¯ä»¥æ‹¥æœ‰crudèƒ½åŠ›
          ||  ||
          ||  ||
           \\ //
     æµ‹è¯•ï¼šusermapperæ˜¯ä¸æ˜¯æœ‰å¢åˆ æ”¹æŸ¥çš„æ–¹æ³•
     åœ¨testæ–‡ä»¶å¤¹ä¸‹é¢çš„WebAdminApplicationTestsæµ‹è¯•

âš ï¸å¦‚æœæ•°æ®åº“è¡¨åå˜æˆuser_tb1ï¼Œé‚£ä¹ˆåŒæ ·è¦åœ¨å®ä½“ç±»é‚£é‡Œæ·»åŠ æ³¨è§£@TableName("user_tb1")
ä¹‹å‰AccountServiceå’ŒCityServiceéƒ½æ˜¯ä¸è§„èŒƒçš„
è§„èŒƒçš„åšæ³•æ˜¯ï¼šåˆ›å»ºä¸€ä¸ªserviceæ¥å£ï¼šUserService
          ||  ||
          ||  ||
           \\ //
    ç„¶ååˆ›å»ºä¸€ä¸ªserviceå®ç°ç±» UserServiceImpl --- å®ç°UserServiceæ¥å£
          ||  ||
          ||  ||
           \\ //
     å®šä¹‰çš„æ–¹æ³•æ˜¯æ”¾åœ¨æ¥å£é‡Œé¢çš„
          ||  ||
          ||  ||
           \\ //
     ä¹‹å‰AccountServiceå’ŒCityServiceéƒ½æ˜¯ä¸è§„èŒƒçš„ å…¨éƒ¨æ”¹æ‰
          ||  ||
          ||  ||
           \\ //
       å»TableController:æ³¨å…¥userService ï¼Œæƒ³è°ƒç”¨getAll()
       å›åˆ°UserServiceImplå’ŒUserServiceæ¥å£å®šä¹‰
          ||  ||
          ||  ||
           \\ //
        UserServiceæ¥å£ extends IService<User>
        å› ä¸ºIServiceé‡Œé¢æœ‰å¾ˆå¤šæ–¹æ³•
          ||  ||
          ||  ||
           \\ //
        UserServiceImpl extends ServiceImpl
        è¿™æ ·extendsä¹‹åï¼ŒUserServiceImplé‡Œé¢ä»€ä¹ˆæ–¹æ³•éƒ½ä¸ç”¨å†™,å› ä¸ºé‡Œé¢æœ‰å¾ˆå¤šæ–¹æ³•
          ||  ||
          ||  ||
           \\ //
        æ­¤æ—¶å›åˆ°TableControllerï¼Œä¸ç”¨å®šä¹‰getAll()ï¼ŒæŸ¥è¯¢å¯ä»¥ç›´æ¥è°ƒç”¨userServiceé‡Œé¢çš„æ–¹æ³•list()
        List<User> list = userService.list();
          ||  ||
          ||  ||
           \\ //
       æ¥åˆ°dynamic_table.html
       åªä¿ç•™ä¸€ä¸ªtrï¼Œå…¶ä½™åˆ æ‰
       è·å–æ•°æ®åº“è¡¨æ ¼å†…å®¹ th:text="${user.name} âš ï¸åæ¥åˆ†é¡µçš„çš„æ—¶å€™éƒ½å­˜å‚¨åœ¨pageå˜æˆ th:text="${page.name}
          ||  ||
          ||  ||
           \\ //
      æ·»åŠ åˆ†é¡µï¼Œåˆ†é¡µä»£ç æ˜¯ç›´æ¥æ‰“å¼€å½“æ—¶æºç dynamic_table.htmlï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€ä¹‹åï¼Œå³é”®ç‚¹å‡»"æ£€æŸ¥"
      æ‰¾å‡ºåˆ†é¡µä»£ç ï¼Œå¤åˆ¶åˆ°è¿™é‡Œçš„dynamic_table.html
          ||  ||
          ||  ||
           \\ //
     é¡µé¢æ˜¯å“ªä¸€é¡µåº”è¯¥è‡ªåŠ¨è·å–ï¼Œæ‰€ä»¥å»TableControllerè®¾ç½®  userService.page()
          ||  ||
          ||  ||
           \\ //
      ä½†æ˜¯ä¼šæŠ¥é”™ï¼Œå› ä¸ºéå†ç”¨æˆ·æ—¶å€™ä¸æ˜¯usersï¼Œå› ä¸ºæ‰€æœ‰æ•°æ®æ”¾åœ¨pageå¯¹è±¡é‡Œé¢
          ||  ||
          ||  ||
           \\ //
      å‚ç…§mybatispluså®˜æ–¹æ–‡æ¡£ä¸­çš„åˆ†é¡µæ’ä»¶ä»£ç --åœ¨configåŒ…ä¸‹é¢æ–°å»ºä¸€ä¸ªé…ç½®MyBatisPlusConfig
      æŠŠå®˜æ–¹æ–‡æ¡£çš„ä»£ç å¤åˆ¶åˆ°MyBatisPlusConfig

      æ•ˆæœï¼šå½“å‰ç¬¬ 1 é¡µ æ€»è®¡ 3é¡µ å…±5æ¡è®°å½•
          ||  ||
          ||  ||
           \\ //
      å¤„ç†é¡µç æŒ‰é’®--å»dynamic_table.html
      éå†å‡ºæ¥çš„æ€»é¡µç æ•°--å¤„ç†ç”Ÿæˆä»å“ªä¸€é¡µåˆ°å“ªä¸€é¡µ
      å½“å‰é¡µçš„æŒ‰é’®è¦é«˜äº® num == page.current?'active':''


ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸç”¨åˆ°çš„æ–‡ä»¶ï¼šdynamic_table.htmlå’ŒableController.java
     åˆ é™¤åŠŸèƒ½--X
          ||  ||
          ||  ||
           \\ //
     å‚ç…§æ¨¡æ¿dynamic_table.htmlï¼ˆadminç´ æé‡Œé¢ï¼‰---UI Elements ---Buttons--æ£€æŸ¥
          ||  ||
          ||  ||
           \\ //
     åœ¨è¿™ä¸ªprojectçš„dynamic_table.html
     <a class="btn btn-danger btn-sm" type="button">Delete</a>
          ||  ||
          ||  ||
           \\ //
     ä¸ºäº†ä½¿åˆ é™¤æŒ‰é’®ç”Ÿæ•ˆï¼Œå»TableControlleré‚£é‡Œå®šä¹‰åˆ é™¤æ–¹æ³•
          ||  ||
          ||  ||
           \\ //
       å›åˆ°é¡µé¢dynamic_table.htmlæŒ‡å®šè¶…é“¾æ¥
       <!--åˆ é™¤æŒ‰é’® {id}æ˜¯${user.id}-->
       <a th:href="@{/user/delete/{id}(id=${user.id})}" class="btn btn-danger btn-sm" type="button">Delete</a>
          ||  ||
          ||  ||
           \\ /
     è¡¥å……ä¸€äº›å°åŠŸèƒ½ï¼šåˆ é™¤ä¹‹åè¿˜åœ¨å½“å‰é¡µï¼Œè€Œä¸”ç½‘å€è¦æ˜¾ç¤ºpn=å½“å‰é¡µ